---
name: 1c-documentation-generator
description: Генерирует документацию для процедур и функций 1С согласно стандарту #std453. Используй когда пользователь просит создать документацию, добавить комментарии к функциям, или описать API.
---

# 1C Documentation Generator Skill

Навык для автоматической генерации документации к процедурам и функциям 1С:Предприятие 8 согласно стандарту #std453.

## Когда использовать этот навык

Используй этот навык когда пользователь:
- Просит создать документацию для функции
- Говорит "документируй эту функцию"
- Просит добавить комментарии к коду
- Хочет описать параметры функции
- Просит сгенерировать API-документацию
- Говорит "добавь описание к этой процедуре"
- Просит привести комментарии к стандартам 1С

## Возможности навыка

Генерирует полную документацию согласно стандарту #std453:

### Секции документации

1. **Описание**
   - Краткое описание назначения
   - Начинается с глагола
   - Без упоминания "Функция..." или "Процедура..."

2. **Параметры**
   - Формат: `ИмяПараметра - Тип - описание`
   - Все типы параметров
   - Описание для каждого параметра
   - Для структур - ссылка на функцию-конструктор

3. **Возвращаемое значение** (для функций)
   - Тип возвращаемого значения
   - Описание значения
   - Для структур - описание свойств

4. **Пример** (опционально)
   - Пример использования функции
   - Или пример реализации (для переопределяемых)

5. **Устарела** (для устаревших функций)
   - Первая строка "Устарела."
   - Описание замены

## Подход к генерации

### 1. Анализ функции

```
1. Прочитай код функции/процедуры
2. Определи:
   - Назначение (из имени и кода)
   - Параметры и их типы
   - Возвращаемое значение (для функций)
   - Экспортная или нет
```

### 2. Определение типов

Определи типы параметров из:
- Имени параметра (Дата, Валюта, и т.п.)
- Использования в коде
- Контекста функции

**Стандартные типы 1С:**
- `Строка`, `Число`, `Булево`, `Дата`
- `Неопределено`, `Null`
- `СправочникСсылка.<Имя>`
- `ДокументСсылка.<Имя>`
- `РегистрСведенийКлючЗаписи.<Имя>`
- `Массив`, `Массив из <Тип>`
- `Структура`, `Соответствие`, `ТаблицаЗначений`
- Специальные: `ОпределяемыйТип.<Имя>`, `ОбъектМетаданныхОтчет`

### 3. Формирование описания

**Для процедур:**
- Начинать с глагола: "Выполняет...", "Загружает...", "Обрабатывает..."

**Для функций:**
- "Возвращает...", "Проверяет...", "Вычисляет...", "Определяет..."

**Избегать:**
- "Функция возвращает..." (избыточно)
- "Процедура выполняет..." (избыточно)
- Повторения имени функции

### 4. Документирование структур

Для параметров типа Структура:
```1c
// Параметры:
//  ПараметрыОбработки - см. ИмяМодуля.ФункцияКонструктор
```

Для возвращаемых структур:
```1c
// Возвращаемое значение:
//  Структура:
//   * Дата - Дата - дата операции
//   * Сумма - Число - сумма операции
//   * Валюта - СправочникСсылка.Валюты - валюта операции
```

Для вложенных структур (увеличивать звездочки):
```1c
// Возвращаемое значение:
//  Структура:
//   * Адрес - Структура:
//     ** Индекс - Строка - почтовый индекс
//     ** Город - Строка - название города
//   * Контакты - Массив из Структура:
//     ** Телефон - Строка
//     ** Email - Строка
```

## Примеры генерации

### Пример 1: Простая функция

**Исходный код:**
```1c
Функция КурсВалюты(Валюта, Дата = Неопределено) Экспорт
	Если Дата = Неопределено Тогда
		Дата = ТекущаяДатаСеанса();
	КонецЕсли;
	// код получения курса
	Возврат Курс;
КонецФункции
```

**Сгенерированная документация:**
```1c
// Возвращает курс валюты на указанную дату.
//
// Параметры:
//  Валюта - СправочникСсылка.Валюты - валюта для получения курса.
//  Дата - Дата - дата, на которую требуется курс.
//        - Неопределено - используется текущая дата сеанса.
//
// Возвращаемое значение:
//  Число - курс валюты на указанную дату.
//
Функция КурсВалюты(Валюта, Дата = Неопределено) Экспорт
```

### Пример 2: Процедура с параметром Отказ

**Исходный код:**
```1c
Процедура ПроверитьЗаполнение(Объект, Отказ) Экспорт
	Если Не ЗначениеЗаполнено(Объект.Дата) Тогда
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры
```

**Сгенерированная документация:**
```1c
// Проверяет заполнение обязательных реквизитов объекта.
//
// Параметры:
//  Объект - ДанныеФормыСтруктура - проверяемый объект.
//  Отказ - Булево - признак отказа от выполнения операции.
//                   Устанавливается в Истина при обнаружении ошибок.
//
Процедура ПроверитьЗаполнение(Объект, Отказ) Экспорт
```

### Пример 3: Функция возвращающая структуру

**Исходный код:**
```1c
Функция ПараметрыПодключения() Экспорт
	Параметры = Новый Структура;
	Параметры.Вставить("Сервер", "");
	Параметры.Вставить("Порт", 0);
	Параметры.Вставить("ИспользоватьSSL", Ложь);
	Возврат Параметры;
КонецФункции
```

**Сгенерированная документация:**
```1c
// Возвращает параметры подключения к серверу со значениями по умолчанию.
//
// Возвращаемое значение:
//  Структура:
//   * Сервер - Строка - адрес сервера.
//   * Порт - Число - порт подключения.
//   * ИспользоватьSSL - Булево - использовать защищенное соединение.
//
Функция ПараметрыПодключения() Экспорт
```

### Пример 4: Функция с примером

**Исходный код:**
```1c
Функция ПодставитьПараметрыВСтроку(Шаблон, Параметр1, Параметр2) Экспорт
	Результат = СтрЗаменить(Шаблон, "%1", Параметр1);
	Результат = СтрЗаменить(Результат, "%2", Параметр2);
	Возврат Результат;
КонецФункции
```

**Сгенерированная документация:**
```1c
// Подставляет параметры в строку-шаблон.
// Заменяет вхождения %1 и %2 на указанные значения параметров.
//
// Параметры:
//  Шаблон - Строка - строка-шаблон с метками %1 и %2.
//  Параметр1 - Произвольный - значение для подстановки вместо %1.
//  Параметр2 - Произвольный - значение для подстановки вместо %2.
//
// Возвращаемое значение:
//  Строка - строка с подставленными параметрами.
//
// Пример:
//  ПодставитьПараметрыВСтроку("Сумма %1 %2", 100, "руб.") = "Сумма 100 руб."
//
Функция ПодставитьПараметрыВСтроку(Шаблон, Параметр1, Параметр2) Экспорт
```

### Пример 5: Устаревшая функция

**Исходный код:**
```1c
Функция ПолучитьТекущуюДату() Экспорт
	Возврат ТекущаяДатаСеанса();
КонецФункции
```

**Сгенерированная документация:**
```1c
// Устарела. Следует использовать ТекущаяДатаСеанса().
//
// Возвращаемое значение:
//  Дата - текущая дата сеанса.
//
Функция ПолучитьТекущуюДату() Экспорт
```

## Форматирование документации

### Правила форматирования:

1. **Отступы**: Два пробела после `//`
2. **Пустые строки**: Между секциями
3. **Выравнивание**: Тире на одном уровне в секции Параметры
4. **Директивы**: После комментария

```1c
// Описание функции.
//
// Параметры:
//  Параметр1 - Тип - описание.
//  Параметр2 - Тип - описание.
//
// Возвращаемое значение:
//  Тип - описание.
//
&НаСервере
Функция ИмяФункции(Параметр1, Параметр2)
```

## Важные принципы

- **Точность**: Правильно определи типы параметров
- **Полнота**: Все параметры должны быть описаны
- **Ясность**: Описание должно быть понятным
- **Стандартность**: Следуй формату стандарта #std453
- **Контекст**: Используй контекст функции для лучшего описания

## Интеграция с другими навыками

- Используется навыком **1c-code-fixer** для добавления документации
- Может быть вызван явно пользователем

## Ограничения

- Не всегда может точно определить типы параметров
- Для сложных структур может требоваться ручная доработка
- Описание может требовать уточнения от пользователя
- Примеры генерируются не всегда (только когда очевидны)
